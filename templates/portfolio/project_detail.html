{% extends 'base.html' %}

{% block title %}{{ project.title }} - Samar Craft Projects{% endblock %}

{% block meta_description %}{{ project.summary|default:project.description|striptags|truncatewords:25 }}{% endblock %}
{% block meta_keywords %}stone projects, portfolio, {{ project.location|lower }}, {{ project.title|lower }}{% endblock
%}

{% block og_title %}{{ project.title }} - Samar Craft Projects{% endblock %}
{% block og_description %}{{ project.summary|default:project.description|striptags|truncatewords:25 }}{% endblock %}
{% block og_image %}{% if project.get_primary_image %}{{ project.get_primary_image.image.url }}{% else %}{{ block.super
}}{% endif %}{% endblock %}

{% block content %}
<section style="padding: 2rem 0;">
    <div style="max-width: 1000px; margin: 0 auto;">
        <!-- Breadcrumb -->
        <div style="margin-bottom: 1rem;">
            <a href="{% url 'core:home' %}" style="color: var(--primary-color); text-decoration: none;">Home</a>
            <span style="margin: 0 0.5rem;">/</span>
            <a href="{% url 'portfolio:project_list' %}"
                style="color: var(--primary-color); text-decoration: none;">Projects</a>
            <span style="margin: 0 0.5rem;">/</span>
            <span>{{ project.title }}</span>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
            <!-- Image Gallery -->
            <div>
                {% if project.images.all %}
                <div id="main-image" style="margin-bottom: 1rem;">
                    <img src="{{ project.get_primary_image.image.url }}" alt="{{ project.title }}"
                        style="width: 100%; height: 400px; object-fit: cover; border-radius: 8px;">
                </div>

                {% if project.images.count > 1 %}
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 0.5rem;">
                    {% for image in project.images.all %}
                    <img src="{{ image.image.url }}" alt="{{ project.title }}"
                        onclick="document.getElementById('main-image').innerHTML='<img src=\'{{ image.image.url }}\' alt=\'{{ project.title }}\' style=\'width: 100%; height: 400px; object-fit: cover; border-radius: 8px;\'>'"
                        style="width: 100%; height: 100px; object-fit: cover; border-radius: 4px; cursor: pointer; border: 2px solid {% if image.is_primary %}var(--primary-color){% else %}transparent{% endif %};">
                    {% endfor %}
                </div>
                {% endif %}
                {% else %}
                <div
                    style="width: 100%; height: 400px; background: #eee; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                    <p style="color: #999;">No images available</p>
                </div>
                {% endif %}
            </div>

            <!-- Project Details -->
            <div>
                <h1 style="margin-bottom: 0.5rem;">{{ project.title }}</h1>
                {% if project.location %}
                <p style="color: var(--primary-color); font-size: 1.1rem; margin-bottom: 1rem;">üìç {{ project.location
                    }}</p>
                {% endif %}

                <p style="font-size: 1.1rem; color: #666; margin-bottom: 1.5rem;">{{ project.summary }}</p>

                {% if project.completed_date %}
                <div style="background: #f5f5f5; padding: 1rem; border-radius: 4px; margin-bottom: 1.5rem;">
                    <p style="font-weight: bold; margin: 0;">Completed: {{ project.completed_date|date:"F Y" }}</p>
                </div>
                {% endif %}

                <div style="margin-bottom: 2rem;">
                    <h3 style="margin-bottom: 1rem;">Project Description</h3>
                    <div style="line-height: 1.6;">{{ project.description|linebreaks }}</div>
                </div>

                <!-- CTA -->
                <a href="https://wa.me/60165301357?text=Hi, I'm interested in a project similar to {{ project.title }}"
                    target="_blank"
                    style="display: inline-block; padding: 1rem 2rem; background: #25D366; color: white; text-decoration: none; border-radius: 4px; font-size: 1.1rem; font-weight: bold;">
                    <span style="margin-right: 0.5rem;">üí¨</span> Discuss Your Project
                </a>

                <a href="{% url 'portfolio:project_list' %}"
                    style="display: inline-block; padding: 1rem 2rem; background: #666; color: white; text-decoration: none; border-radius: 4px; margin-left: 1rem; margin-top: 1rem;">
                    ‚Üê Back to Projects
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}